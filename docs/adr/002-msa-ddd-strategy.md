# ADR-002: MSA 및 도메인 주도 설계 (MSA & DDD Strategy)

**상태**: 승인됨  
**작성일**: 2026-01-20

## 배경 (Context)

초기 기획 단계에서 수강신청 시스템은 복잡한 비즈니스 로직(시간표 조합, 시나리오 네비게이션)과 대규모 트래픽(수강신청 시즌)을 처리해야 하는 요구사항이 있었습니다.

모놀리식 아키텍처로는:
- 도메인 간 결합도가 높아짐
- 특정 기능(예: 강의 검색)의 부하가 전체 시스템에 영향

## 고려한 대안 (Alternatives Considered)

| 대안 | 장점 | 단점 |
|------|------|------|
| 모놀리식 | 단순함, 트랜잭션 용이 | 스케일링 어려움, 높은 결합도 |
| **MSA + DDD (선택)** | 독립 배포/확장, 장애 격리 | 분산 시스템 복잡성 |
| 모듈형 모놀리스 | 중간 복잡도 | 완전한 독립 배포 불가 |

## 결정 (Decision)

**마이크로서비스 아키텍처(MSA)**를 채택하고, 각 서비스를 **DDD(Domain-Driven Design)** 원칙에 따라 분리합니다.

### 서비스 경계 (Bounded Contexts)

| 서비스 | 책임 | 특성 |
|--------|------|------|
| **User Service** | 사용자 인증, 프로필, 대학 정보 | 계정 보안 |
| **Catalog Service** | 강의 데이터 관리, 검색 | Read Heavy |
| **Planner Service** | 시간표, 시나리오, 수강신청 | Write Heavy, 핵심 비즈니스 |

## 근거 (Rationale)

- **관심사 분리**: '강의 검색'과 '개인 시간표 계획'은 라이프사이클과 트래픽 패턴이 다름
- **장애 격리**: 강의 검색 기능 폭주 시에도 수강신청 시뮬레이션은 영향 없음
- **기술 스택 유연성**: 향후 검색 엔진(Elasticsearch) 도입 등 용이

## 영향 (Consequences)

### 긍정적 영향
- 서비스별 명확한 도메인 경계로 코드 이해도 향상
- 독립적인 배포 및 확장 가능
- 팀 규모 확장 시 병렬 개발 용이

### 부정적 영향 / 트레이드오프
- 분산 데이터 관리의 복잡성 (Service 간 조인 불가, Eventual Consistency)
- 인프라 복잡도 증가 (Gateway, Service Discovery 등)
- 통합 테스트 비용 증가

## 관련 문서 (References)
- 반영된 문서: [architecture.md](../architecture.md)
- 관련 ADR: [ADR-003 API Gateway](./003-api-gateway-strategy.md)
